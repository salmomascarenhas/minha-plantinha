<div class="min-h-screen flex items-center justify-center bg-slate-100 px-4">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-md border border-slate-200">
        <div>
            <h1 class="text-3xl font-bold text-center text-slate-800">
                Acesse sua Conta
            </h1>
            <p class="text-center text-slate-500 mt-2">
                Bem-vindo de volta!
            </p>
        </div>

        <form id="login-form" class="space-y-6">
            <div>
                <label for="email" class="text-sm font-medium text-slate-700">Email</label>
                <input 
                    id="email" 
                    name="email" 
                    type="email" 
                    required 
                    class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-green-500 focus:border-green-500"
                    placeholder="voce@exemplo.com"
                >
            </div>

            <div>
                <label for="password" class="text-sm font-medium text-slate-700">Senha</label>
                <input 
                    id="password" 
                    name="password" 
                    type="password" 
                    required 
                    class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-green-500 focus:border-green-500"
                >
            </div>

            <div id="error-message" class="text-sm text-red-600 text-center"></div>

            <div>
                <button 
                    type="submit" 
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors"
                >
                    Entrar
                </button>
            </div>
        </form>
        <p class="text-center text-sm text-slate-600">
            NÃ£o tem uma conta?
            <a href="/register" class="font-medium text-green-600 hover:text-green-500">
                Cadastre-se
            </a>
        </p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const loginForm = document.getElementById('login-form');
        const errorMessageDiv = document.getElementById('error-message');

        loginForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            errorMessageDiv.textContent = ''; 

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password }),
                });

                const data = await response.json();


                if (!response.ok) 
                    throw new Error(data.message || 'Erro ao tentar fazer login.');
                
                localStorage.setItem('authToken', data.token);
                window.location.href = '/dashboard';

            } catch (error) {
                errorMessageDiv.textContent = error.message;
            }
        });
    });
</script>